<div class="ui-container-fluid wrapper">
    <!-- заголовок -->
    <div class="personal-area__subtitle">
        <span class="ui-text-head--2 ui-text--bold">Добавление товара</span>
    </div>

    <!-- заголовок -->
    {{
        form_ajax('onSave', {
            flash: 1,
            files: 1,
            class:'ui-container-fluid wrapper',
            'data-request-validate':'true',
        })
    }}
        <input type="hidden" name="upload_image" value="0">

        <div class="ui-grid-container ui-grid-gap">
            <div class="ui-col-sm-3">
                <div id="imageUploader">
                    <input type="file" name="product_image" id="fileUpload" accept="image/*" style="display: none;">
                    <img id="previewImage" src="/themes/demo/assets/images/placeholder-uploader.svg" alt="" style="max-width: 250px; max-height: 250px;">
                </div>

                <div class="lc-shop__add-block">
                    <div class="ui-prompt">
                        Загружайте изображение с соотношением сторон
                        <span class="attention">1:1</span>
                        c разрешением
                        <span class="attention"> не более 250x250</span>
                        в формате
                        <span class="attention">JPG, PNG или GIF </span>
                        и размером
                        <span class="attention">не более 4МБ.</span>
                    </div>
                </div>
            </div>
            <div class="ui-col-sm-9">
                <div class="lc-shop__add-block ui-input">
                    <label class="ui-input-label" for="title">Название товара</label>
                    <input class="ui-input-item _size-32" type="text" name="title" id="title">
                </div>

                <div class="lc-shop__add-block ui-input">
                    <label class="ui-input-label" for="description">Описание товара</label>
                    <textarea class="ui-input-textarea _size-32" name="description" id="description"></textarea>
                </div>

                <div class="lc-shop__add-block ui-select">
                    <label class="ui-input-label" for="categories">Название категории</label>

                    <select id="categories" name="category_id" class="someClass">
                        {% for item in categories %}
                        <option value="{{item.id}}">{{item.title}}</option>
                        {% endfor %}
                    </select>
                </div>

                <div class="lc-shop__add-block ui-input">
                    <label class="ui-input-label" for="price">Укажите стоимость товара</label>
                    <input class="ui-input-item _size-32" type="number" name="price" id="price">
                </div>

                <div class="lc-shop__add-block ui-input">
                    <label class="ui-input-label" for="quantity">Укажите количество товара</label>
                    <input class="ui-input-item _size-32" type="number" name="quantity" id="quantity">
                </div>

                <button type="submit" class="ui-button ui-button-size--32 ui-button-view--2 ui-button--full-mobile" data-attach-loading>Добавить товар</button>
            </div>
        </div>

    {{ form_close() }}
</div>

<script>
    let categories = new SlimSelect({
        select: '#categories',
        settings: {
            searchText: 'Ничего не найдено',
            searchPlaceholder: 'Найти категорию',
            placeholderText: 'Выберите категорию',
        }
    })
</script>

{% put scripts %}
<script>
    $(function () {
        $('#previewImage').on('click', function () {
            $('#fileUpload').click();
        });

        $('#fileUpload').on('change', function () {
            const file = this.files[0];

            if (file) {
                const reader = new FileReader();

                reader.onload = function (event) {
                    $('#previewImage').attr('src', event.target.result);
                };

                reader.readAsDataURL(file);
            }
        })
    });
</script>
{% endput %}
