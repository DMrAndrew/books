{% if orderItems.count > 0 %}
    {% for key, products in orderItems %}
        <div class="basket__item">
            <div class="basket__item-header">
                Продавец: <a href="/author-page/{{ key }}">{{ sellers['usernames'][key] }}</a>
            </div>
            {% for orderItem in products %}

                <div class="basket__body">
                    <div class="basket__table">
                        <div class="basket__table-item {% if orderItem.product.quantity == 0 %} --disabled {% endif %}">
                            <div class="basket__table-item-img">
                                <img src="{{ orderItem.product.product_image.thumbUrl(250, 250, {quality: 100 }) }}"
                                     alt="{{ orderItem.product.title }}"/>
                            </div>
                            <a class="basket__table-item-name" href="/shop/product/{{ orderItem.product.id }}">{{ orderItem.product.title }}</a>

                            {% if orderItem.product.quantity == 0 or orderItem.quantity > orderItem.product.quantity %}
                                <div class="basket__table-item-counter">
                                    <div class="counter">
                                        <button disabled class="counter__button"><svg width="12" height="12"><use xlink:href="{{ 'assets/icon-sprite/svg-sprite.svg#minus-stroked-16' | theme }}"></use></svg></button>
                                        <input disabled class="counter__input" type="number" value="{{ orderItem.quantity }}" min="1" max="999">
                                        <button disabled class="counter__button"><svg width="12" height="12"><use xlink:href="{{ 'assets/icon-sprite/svg-sprite.svg#plus-stroked-16' | theme }}"></use></svg></button>
                                    </div>
                                </div>
                                <div class="basket__table-item-price text-violet">
                                    {% if orderItem.product.quantity == 0 %}
                                        Нет вналичии
                                    {% endif %}
                                    {% if orderItem.quantity > orderItem.product.quantity %}
                                        Товара в наличие меньше чем у вас в корзине
                                    {% endif%}
                                </div>
                            {% else %}
                                <div class="basket__table-item-counter">
                                    <div class="counter">
                                        <button class="counter__button"
                                                {% if orderItem.quantity == 1 %} disabled {% endif %}
                                                data-request="Basket::onReduceQuantity"
                                                data-request-data="orderItemId:{{ orderItem.id }}"
                                        ><svg width="12" height="12">
                                            <use xlink:href="{{ 'assets/icon-sprite/svg-sprite.svg#minus-stroked-16' | theme }}"></use></svg>
                                        </button>
                                        <input class="counter__input" type="number" value="{{ orderItem.quantity }}" min="1" max="{{ orderItem.product.quantity }}">
                                        <button class="counter__button"
                                                {% if orderItem.quantity >= orderItem.product.quantity or orderItem.quantity > orderItem.product.quantity %} disabled {% endif %}
                                                data-request="Basket::onAddQuantity"
                                                data-request-data="orderItemId:{{ orderItem.id }}"
                                        ><svg width="12" height="12">
                                            <use xlink:href="{{ 'assets/icon-sprite/svg-sprite.svg#plus-stroked-16' | theme }}"></use></svg>
                                        </button>
                                    </div>
                                </div>
                                <div class="basket__table-item-price">{{ orderItem.price }} ₽</div>
                            {% endif %}
                            <button type="button" class="basket__table-item-remove"
                                    data-request="Basket::onRemoveProduct"
                                    data-request-data="orderItemId:{{ orderItem.id }}"
                            >
                                <svg width="24" height="24"><use xlink:href="{{ 'assets/icon-sprite/svg-sprite.svg#close-stroked-16' | theme }}"></use></svg>
                            </button>
                        </div>
                    </div>
                </div>

            {% endfor %}
            <div class="basket__item-footer">
                <div class="ui-text-head--3 ui-text--bold">Итого: {{ sellers['amount'][key] }} ₽</div>
                {% if sellers['hasDisabledProduct'][key] == false %}
                    <a href="/shop/checkout/{{ key }}" class="ui-button ui-button-size--32 ui-button-view--2 ui-text--medium">Купить</a>
                {% endif %}
                {% if sellers['hasDisabledProduct'][key] == true %}
                    <button disabled class="ui-button ui-button-size--32 ui-button-view--2 ui-text--medium">Купить</button>
                    <p class="text-violet">В корзине присутсвуют товары которых нет в наличии. Перед оформлением заказа удалите их.</p>
                {% endif %}

            </div>
        </div>
    {% endfor %}
{% else %}

<div class="ui-container-fluid common-pages__container">
    <div class="wrapper">
        <div class="common-pages__content">
            <div class="common-pages__title ui-text-head--2 ui-text--bold">У вас пока нет товаров в корзине</div>
            <div class="common-pages__text ">Вы можете перейти в <a href="/shop">Магазин</a> для покупки или вернуться на <a
                href="#" onclick="history.back();">предыдущую страницу</a>.
            </div>
        </div>
    </div>
</div>

{% endif %}


<style>
    .basket__table-item {
        align-items: center;
    }
    .basket__table-item-remove {
        justify-self: end;
    }
</style>
