<div class="create-book__input ui-multi-select">
    <div class="ui-multi-select-header">
        <label class="ui-select-label">Тэги</label>
    </div>

    <div class="ui-multi-select-container">
        <div class="ui-multi-select-item _size-32">
            <div class="ui-multi-select-tag-wrapper">
                {% for tag in tags %}
                <input type="hidden" name="tags[{{tag.id}}][id]" value="{{tag.id}}"/>
                <div class="ui-multi-select-tag ui-tag _size-24 _color-gray"
                     onclick="oc.request(this,'booker::onRemoveTag')"
                     data-request-data="delete_tag_id:'{{tag.id}}'"
                >
                    <span>{{tag.name}}</span>
                    <svg>
                        <use xlink:href="{{'assets/icon-sprite/svg-sprite.svg#close-stroked-16' | theme}}"></use>
                    </svg>
                </div>
                {% endfor %}

                <input class="ui-multi-select-item-input " onload="alert(1)"
                       data-request="booker::onSearchTag"
                       data-request-update="'@tag_input':'#tag_input_partial'"
                       data-track-input="200"
                       name="tag_string"
                       value="{{tagString}}"
                       type="text">
            </div>

<!--            <svg class="ui-multi-select-item-icon">-->
<!--                <use xlink:href="{{'assets/icon-sprite/svg-sprite.svg#chevron-down-16' | theme}}"></use>-->
<!--            </svg>-->
        </div>
        <span class="validation-error" data-validate-for="name"></span>
        <span class="validation-error" data-validate-for="tag"></span>
        {% if already_has or search_result or can_create %}
        <div class="ui-dropdown">
            <div class="ui-dropdown-container">
                {% if already_has %}
                <div class="ui-dropdown-item _placeholder">
                    <span>Тэг «{{tagString}}» уже добавлен на страницу</span>
                </div>
                {% endif %}

                {% for tag in search_result %}
                <div class="ui-dropdown-item"
                     onclick="oc.request(this,'booker::onAddTag')"
                     data-request-data="create_tag_id:'{{tag.id}}'"
                >
                    <span>{{ tag.name }}</span>
                </div>
                {% endfor %}


                {% if can_create %}
                <div class="ui-dropdown-separate"></div>
                <div class="ui-dropdown-item active"
                     onclick="oc.request(this,'booker::onCreateTag')"
                     data-request-data="create_tag_name:'{{tagString}}'"
                >
                    <svg>
                        <use xlink:href="{{'assets/icon-sprite/svg-sprite.svg#plus-stroked-16' | theme}}"></use>
                    </svg>
                    <span>Создать новый тэг «{{tagString}}»</span>
                </div>
                {% endif %}
            </div>
        </div>
        {% endif %}
    </div>
</div>
