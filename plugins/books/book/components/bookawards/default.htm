{% if (user and buyAwardsIsAllowed) or awards.count %}
<div id="awards_spawn">
    {% if user and buyAwardsIsAllowed %}
    <button type="button"
            class="book-card-full-description__awards-button ui-button ui-button-size--32 ui-button-view--2"
            data-request="onOpenForm"
            data-request-flash="true">Купить награду
    </button>
    {% endif %}
    {% for awardType in awards %}
    <div class="book-card-full-description__awards" data-accodrion="wrapper">
        <div class="book-card-full-description__awards-header" data-accodrion="header">
            <div class="book-card-full-description__awards-feather _{{awardType.first.award.type.tag}} square-40">
                <svg class="square-24">
                    <use xlink:href="{{'assets/icon-sprite/svg-sprite.svg#feather-stroked-24' | theme}}"></use>
                </svg>
            </div>
            <div class="book-card-full-description__awards-text">
                <div class="ui-text--bold" itemprop="award">{{awardType.first.award.name}}</div>
                <span>+{{awardType.first.award.rate}} к рейтингу книги</span>
            </div>
            <div class="book-card-full-description__awards-number">
                <span>{{awardType.count}}</span>
                <svg class="square-16 cursor-pointer">
                    <use xlink:href="{{'assets/icon-sprite/svg-sprite.svg#chevron-down-16' | theme}}"></use>
                </svg>
            </div>
        </div>
        <div class="book-card-full-description__awards-body" data-accodrion="body">
            {% for awardBook in awardType %}
            <div class="book-card-full-description__content ">
                <a href="/author-page/{{awardBook.profile.id}}"
                   class="ui-link _violet">{{awardBook.profile.name}}</a>
                <span>{{awardBook.created_at.diffForHumans}}</span>
            </div>
            {% endfor%}
        </div>
    </div>
    {% endfor %}

    <div id="awards_form"></div>

</div>
{% endif %}
<script>

(    function initAwardAccordion(){
        const accordion = document.querySelectorAll('[data-accodrion="wrapper"]');

        accordion.forEach(item => {
            item.addEventListener('click', e => {
                e.preventDefault();
                if (e.target.closest('[data-accodrion="header"]')) {
                    item.classList.toggle('active');
                }

            })
        })
    }
)()
</script>
